<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Course Management (Standalone)</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Poppins", sans-serif;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .standalone-badge {
      background: #ff9800;
      color: white;
      padding: 8px 15px;
      text-align: center;
      font-size: 12px;
    }

    /* Header */
    .header {
      background: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .header-content {
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      color: #667eea;
      font-size: 24px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .user-badge {
      background: #667eea;
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 14px;
    }

    .logout-btn {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    .logout-btn:hover {
      background: #c0392b;
    }

    /* Main Container */
    .container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .welcome {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .welcome h2 {
      color: #333;
      margin-bottom: 10px;
    }

    .welcome p {
      color: #666;
    }

    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 5px;
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .tab-btn {
      background: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: 0.3s;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .tab-btn.active {
      background: #667eea;
      color: white;
    }

    .tab-btn:hover {
      transform: translateY(-2px);
    }

    /* Content Sections */
    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    /* Teacher - Create Course Form */
    .create-course-form {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    .create-course-form h3 {
      margin-bottom: 20px;
      color: #333;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #555;
      font-weight: 500;
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
    }

    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }

    .submit-btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: 0.3s;
    }

    .submit-btn:hover {
      background: #5568d3;
    }

    /* Courses Grid */
    .courses-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .course-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transition: 0.3s;
    }

    .course-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
    }

    .course-card h4 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .course-card p {
      color: #666;
      font-size: 14px;
      margin-bottom: 8px;
    }

    .course-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #eee;
    }

    .duration-badge {
      background: #f0f0f0;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      color: #555;
    }

    .enroll-btn, .delete-btn {
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      transition: 0.3s;
    }

    .enroll-btn {
      background: #27ae60;
      color: white;
    }

    .enroll-btn:hover {
      background: #229954;
    }

    .enroll-btn:disabled {
      background: #95a5a6;
      cursor: not-allowed;
    }

    .delete-btn {
      background: #e74c3c;
      color: white;
    }

    .delete-btn:hover {
      background: #c0392b;
    }

    .enrolled-badge {
      background: #27ae60;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
    }

    .teacher-name {
      color: #999;
      font-size: 12px;
      font-style: italic;
    }

    .enrolled-count {
      color: #667eea;
      font-size: 12px;
      font-weight: 600;
    }

    .message {
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
      text-align: center;
    }

    .message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .message.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      background: white;
      border-radius: 10px;
      color: #999;
    }

    .empty-state h3 {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="standalone-badge">üì¶ STANDALONE MODE - Using Browser Storage</div>
    <div class="header-content">
      <h1>üìö Course Management System</h1>
      <div class="user-info">
        <div class="user-badge">
          <span id="userName"></span> (<span id="userRole"></span>)
        </div>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>
  </div>

  <!-- Main Container -->
  <div class="container">
    <!-- Welcome Section -->
    <div class="welcome">
      <h2>Welcome, <span id="welcomeName"></span>! üëã</h2>
      <p id="welcomeMessage"></p>
    </div>

    <div class="info-box">
      ‚ÑπÔ∏è <strong>Standalone Mode:</strong> All courses are saved in your browser's localStorage. Data will be lost if you clear browser data.
    </div>

    <!-- Message Area -->
    <div id="messageArea"></div>

    <!-- Teacher View -->
    <div id="teacherView" style="display: none;">
      <!-- Tabs -->
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('create')">Create Course</button>
        <button class="tab-btn" onclick="switchTab('mycourses')">My Courses</button>
      </div>

      <!-- Create Course Tab -->
      <div id="createTab" class="content-section active">
        <div class="create-course-form">
          <h3>‚ûï Create New Course</h3>
          <form id="createCourseForm">
            <div class="form-group">
              <label>Course Title *</label>
              <input type="text" id="courseTitle" required placeholder="e.g., Introduction to Web Development">
            </div>
            <div class="form-group">
              <label>Description *</label>
              <textarea id="courseDescription" required placeholder="Describe what students will learn..."></textarea>
            </div>
            <div class="form-group">
              <label>Duration *</label>
              <input type="text" id="courseDuration" required placeholder="e.g., 8 weeks, 40 hours">
            </div>
            <button type="submit" class="submit-btn">Create Course</button>
          </form>
        </div>
      </div>

      <!-- My Courses Tab -->
      <div id="mycoursesTab" class="content-section">
        <div id="teacherCourses" class="courses-grid"></div>
      </div>
    </div>

    <!-- Student View -->
    <div id="studentView" style="display: none;">
      <!-- Tabs -->
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('available')">Available Courses</button>
        <button class="tab-btn" onclick="switchTab('enrolled')">My Enrolled Courses</button>
      </div>

      <!-- Available Courses Tab -->
      <div id="availableTab" class="content-section active">
        <div id="availableCourses" class="courses-grid"></div>
      </div>

      <!-- Enrolled Courses Tab -->
      <div id="enrolledTab" class="content-section">
        <div id="enrolledCourses" class="courses-grid"></div>
      </div>
    </div>
  </div>

  <script>
    let currentUser = null;
    let currentTab = 'create';

    // Initialize
    window.onload = function() {
      const userData = sessionStorage.getItem('user');
      if (!userData) {
        window.location.href = 'Project-Standalone.html';
        return;
      }

      currentUser = JSON.parse(userData);
      initializeDashboard();
    };

    function initializeDashboard() {
      document.getElementById('userName').textContent = currentUser.name;
      document.getElementById('userRole').textContent = currentUser.role;
      document.getElementById('welcomeName').textContent = currentUser.name;
      
      if (currentUser.role === 'Teacher') {
        document.getElementById('welcomeMessage').textContent = 'Create and manage your courses here.';
        document.getElementById('teacherView').style.display = 'block';
        loadTeacherCourses();
      } else {
        document.getElementById('welcomeMessage').textContent = 'Browse and enroll in available courses.';
        document.getElementById('studentView').style.display = 'block';
        loadAvailableCourses();
        currentTab = 'available';
      }
    }

    // Switch Tabs
    function switchTab(tabName) {
      const tabs = document.querySelectorAll('.tab-btn');
      const sections = document.querySelectorAll('.content-section');
      
      tabs.forEach(tab => tab.classList.remove('active'));
      sections.forEach(section => section.classList.remove('active'));
      
      currentTab = tabName;
      
      if (currentUser.role === 'Teacher') {
        if (tabName === 'create') {
          tabs[0].classList.add('active');
          document.getElementById('createTab').classList.add('active');
        } else {
          tabs[1].classList.add('active');
          document.getElementById('mycoursesTab').classList.add('active');
          loadTeacherCourses();
        }
      } else {
        if (tabName === 'available') {
          tabs[0].classList.add('active');
          document.getElementById('availableTab').classList.add('active');
          loadAvailableCourses();
        } else {
          tabs[1].classList.add('active');
          document.getElementById('enrolledTab').classList.add('active');
          loadEnrolledCourses();
        }
      }
    }

    // Get courses from localStorage
    function getCourses() {
      return JSON.parse(localStorage.getItem('courses')) || [];
    }

    // Save courses to localStorage
    function saveCourses(courses) {
      localStorage.setItem('courses', JSON.stringify(courses));
    }

    // Create Course (Teacher)
    document.getElementById('createCourseForm')?.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const title = document.getElementById('courseTitle').value;
      const description = document.getElementById('courseDescription').value;
      const duration = document.getElementById('courseDuration').value;

      const courses = getCourses();
      
      const newCourse = {
        id: Date.now().toString(),
        title,
        description,
        duration,
        teacherId: currentUser.id,
        teacherName: currentUser.name,
        enrolledStudents: [],
        createdAt: new Date().toISOString()
      };

      courses.push(newCourse);
      saveCourses(courses);

      showMessage('‚úÖ Course created successfully!', 'success');
      document.getElementById('createCourseForm').reset();
      loadTeacherCourses();
    });

    // Load Teacher's Courses
    function loadTeacherCourses() {
      const courses = getCourses().filter(c => c.teacherId === currentUser.id);
      const container = document.getElementById('teacherCourses');
      
      if (courses.length > 0) {
        container.innerHTML = courses.map(course => `
          <div class="course-card">
            <h4>${course.title}</h4>
            <p>${course.description}</p>
            <p class="enrolled-count">üë• ${course.enrolledStudents.length} students enrolled</p>
            <div class="course-meta">
              <span class="duration-badge">‚è±Ô∏è ${course.duration}</span>
              <button class="delete-btn" onclick="deleteCourse('${course.id}')">Delete</button>
            </div>
          </div>
        `).join('');
      } else {
        container.innerHTML = `
          <div class="empty-state">
            <h3>No courses yet</h3>
            <p>Create your first course to get started!</p>
          </div>
        `;
      }
    }

    // Load Available Courses (Student)
    function loadAvailableCourses() {
      const courses = getCourses();
      const container = document.getElementById('availableCourses');
      
      if (courses.length > 0) {
        container.innerHTML = courses.map(course => {
          const isEnrolled = course.enrolledStudents.some(e => e.studentId === currentUser.id);
          
          return `
            <div class="course-card">
              <h4>${course.title}</h4>
              <p>${course.description}</p>
              <p class="teacher-name">üë®‚Äçüè´ By ${course.teacherName}</p>
              <p class="enrolled-count">üë• ${course.enrolledStudents.length} students enrolled</p>
              <div class="course-meta">
                <span class="duration-badge">‚è±Ô∏è ${course.duration}</span>
                ${isEnrolled 
                  ? '<span class="enrolled-badge">‚úì Enrolled</span>'
                  : `<button class="enroll-btn" onclick="enrollCourse('${course.id}')">Enroll Now</button>`
                }
              </div>
            </div>
          `;
        }).join('');
      } else {
        container.innerHTML = `
          <div class="empty-state">
            <h3>No courses available</h3>
            <p>Check back later for new courses!</p>
          </div>
        `;
      }
    }

    // Load Enrolled Courses (Student)
    function loadEnrolledCourses() {
      const courses = getCourses().filter(c => 
        c.enrolledStudents.some(e => e.studentId === currentUser.id)
      );
      const container = document.getElementById('enrolledCourses');
      
      if (courses.length > 0) {
        container.innerHTML = courses.map(course => `
          <div class="course-card">
            <h4>${course.title}</h4>
            <p>${course.description}</p>
            <p class="teacher-name">üë®‚Äçüè´ By ${course.teacherName}</p>
            <div class="course-meta">
              <span class="duration-badge">‚è±Ô∏è ${course.duration}</span>
              <span class="enrolled-badge">‚úì Enrolled</span>
            </div>
          </div>
        `).join('');
      } else {
        container.innerHTML = `
          <div class="empty-state">
            <h3>No enrolled courses</h3>
            <p>Browse available courses and enroll to get started!</p>
          </div>
        `;
      }
    }

    // Enroll in Course (Student)
    function enrollCourse(courseId) {
      const courses = getCourses();
      const course = courses.find(c => c.id === courseId);
      
      if (course) {
        const alreadyEnrolled = course.enrolledStudents.some(e => e.studentId === currentUser.id);
        
        if (alreadyEnrolled) {
          showMessage('‚ùå You are already enrolled in this course', 'error');
          return;
        }

        course.enrolledStudents.push({
          studentId: currentUser.id,
          studentName: currentUser.name,
          enrolledAt: new Date().toISOString()
        });

        saveCourses(courses);
        showMessage('‚úÖ Successfully enrolled in course!', 'success');
        loadAvailableCourses();
      }
    }

    // Delete Course (Teacher)
    function deleteCourse(courseId) {
      if (!confirm('Are you sure you want to delete this course?')) return;

      let courses = getCourses();
      courses = courses.filter(c => c.id !== courseId);
      saveCourses(courses);

      showMessage('‚úÖ Course deleted successfully!', 'success');
      loadTeacherCourses();
    }

    // Show Message
    function showMessage(message, type) {
      const messageArea = document.getElementById('messageArea');
      messageArea.innerHTML = `<div class="message ${type}">${message}</div>`;
      
      setTimeout(() => {
        messageArea.innerHTML = '';
      }, 5000);
    }

    // Logout
    function logout() {
      sessionStorage.removeItem('user');
      window.location.href = 'Project-Standalone.html';
    }
  </script>
</body>
</html>
